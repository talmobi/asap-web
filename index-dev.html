<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title></title>
</head>
<body>
  <script src="miru-connect.js" type="text/javascript"></script>

  <script src="vendor/XAudioJS/XAudioServer.js" type="text/javascript"></script>
  <script src="vendor/XAudioJS/resampler.js" type="text/javascript"></script>
  <script src="src/asap/asap.js" type="text/javascript"></script>
  <script src="src/asap/asap_player.js" type="text/javascript"></script>

  <!-- <script src="dist/wrapper.js" type="text/javascript"></script> -->
  <!-- <script src="dist/wrapper.min.js" type="text/javascript"></script> -->

  <script type="text/javascript">
    var player = createAsapPlayer()
    var track = player.Track( 'music/drilldance.sap' )

    var audioElement = track.open()
    audioElement.play()

    var _lastTimestamp = ''
    audioElement.ontimeupdate = function () {
      var currentTime = audioElement.currentTime | 0
      var duration = audioElement.duration | 0

      var timestamp = ( `${ currentTime } / ${ duration }` )

      if ( timestamp !== _lastTimestamp ) {
        console.log( timestamp )
      }

      _lastTimestamp = timestamp
    }

    audioElement.play()

    // setTimeout( function () {
    //   console.log( 'seeking to random position' )
    //   audioElement.seek( Math.random() * audioElement.duration )
    // }, 3000 )
  </script>
</body>
</html>
